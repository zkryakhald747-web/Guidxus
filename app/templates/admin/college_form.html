{% extends "base.html" %}

{% block breadcrumb %}
  <a href="/admin/">Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù†</a> â€º <a href="/admin/colleges">Ø§Ù„ÙƒÙ„ÙŠØ§Øª</a> â€º
  <span>{{ 'ÙƒÙ„ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø©' if mode=='create' else 'ØªØ¹Ø¯ÙŠÙ„ ÙƒÙ„ÙŠØ©' }}</span>
{% endblock %}

{% block content %}
<style>
  .form-card { max-width: 820px; margin: 0 auto; }
  .field { display:flex; flex-direction:column; gap:6px; margin-bottom:12px; }
  .field input[type="text"] { padding:8px 10px; border:1px solid #e6e6e6; border-radius:10px; }
  .row { display:grid; grid-template-columns: 1fr 1fr; gap:12px; }
  @media (max-width: 640px){ .row { grid-template-columns: 1fr; } }
  .error { background:#fef2f2; color:#991b1b; border:1px solid #fecaca; padding:10px; border-radius:10px; margin-bottom:12px; }
  .hint { color:#6b7280; font-size:.9rem; }
  .thumb { width:160px; height:80px; object-fit:contain; border:1px solid #eee; background:#fff; padding:6px; border-radius:8px; }
  .upload-note { font-size:.85rem; color:#6b7280; }
  .uploads-grid { display:grid; grid-template-columns: 1fr 1fr 1fr; gap:12px; }
  @media (max-width: 800px){ .uploads-grid { grid-template-columns: 1fr; } }
  .box { border:1px solid #eee; border-radius:12px; padding:10px; background:#fff; }
  .box h4 { margin:0 0 6px; font-size:1rem; }
</style>

<div class="card form-card">
  <div class="card-head">
    <div class="card-icon">ğŸ“</div>
    <h3>{{ 'Ø¥Ù†Ø´Ø§Ø¡ ÙƒÙ„ÙŠØ©' if mode=='create' else 'ØªØ¹Ø¯ÙŠÙ„ ÙƒÙ„ÙŠØ©' }}</h3>
  </div>

  {% if error %}
    <div class="error">{{ error }}</div>
  {% endif %}

  <form method="post" id="collegeForm" enctype="multipart/form-data">
    <div class="field">
      <label>Ø§Ø³Ù… Ø§Ù„ÙƒÙ„ÙŠØ©
        <input type="text" name="name" id="f_name" required value="{{ item.name if item else (preset_name or '') }}">
      </label>
    </div>

    <div class="field">
      <label>Ø§Ø³Ù… Ø§Ù„ÙƒÙ„ÙŠØ© (Ù„Ù„Ø·Ø¨Ø§Ø¹Ø© Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©)
        <input type="text" name="name_print_ar" id="f_name_print_ar" value="{{ item.name_print_ar if item and item.name_print_ar else '' }}" placeholder="Ù…Ø«Ø§Ù„: Ø§Ù„ÙƒÙ„ÙŠØ© Ø§Ù„ØªÙ‚Ù†ÙŠØ© Ø¨Ù†Ø¬Ø±Ø§Ù†">
      </label>
      <div class="hint">ÙŠÙØ·Ø¨Ø¹ Ø¹Ù„Ù‰ Ø§Ù„Ø´Ù‡Ø§Ø¯Ø§Øª Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©. Ø¥Ù† ØªÙØ±Ùƒ ÙØ§Ø±ØºÙ‹Ø§ Ø³ÙŠÙØ³ØªØ®Ø¯Ù… Ø§Ø³Ù… Ø§Ù„ÙƒÙ„ÙŠØ© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ.</div>
    </div>

    <div class="field">
      <label>Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ Ù„Ù„ÙƒÙ„ÙŠØ© (Ù„Ù„Ø·Ø¨Ø§Ø¹Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø´Ù‡Ø§Ø¯Ø©)
        <input type="text" name="name_en" id="f_name_en" value="{{ item.name_en if item and item.name_en else '' }}" placeholder="Ù…Ø«Ø§Ù„: Technical College in Najran">
      </label>
      <div class="hint">Ø§Ø®ØªÙŠØ§Ø±ÙŠØŒ ÙˆÙŠØ¸Ù‡Ø± ÙÙŠ ØªØ±ÙˆÙŠØ³Ø© Ø§Ù„Ø´Ù‡Ø§Ø¯Ø© Ø¨Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©.</div>
    </div>

    
    <h4 style="margin-top: 20px; margin-bottom: 12px; font-size: 1rem; color: #333;">Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠÙ†</h4>
    
    <div class="field">
      <label>Ø§Ø³Ù… Ø¹Ù…ÙŠØ¯ Ø§Ù„ÙƒÙ„ÙŠØ©
        <input type="text" name="dean_name" id="f_dean" value="{{ item.dean_name if item and item.dean_name else '' }}" placeholder="Ù…Ø«Ø§Ù„: Ø£.Ø¯. Ù…Ø­Ù…Ø¯ Ø¹Ù„ÙŠ">
      </label>
      <div class="hint">Ø³ÙŠØ¸Ù‡Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø´Ù‡Ø§Ø¯Ø§Øª ÙƒÙ…ÙˆÙ‚Ø¹ Ø¹Ù…ÙŠØ¯ Ø§Ù„ÙƒÙ„ÙŠØ©.</div>
    </div>

    <div class="field">
      <label>Ø§Ø³Ù… ÙˆÙƒÙŠÙ„ Ø´Ø¤ÙˆÙ† Ø§Ù„Ù…ØªØ¯Ø±Ø¨ÙŠÙ†
        <input type="text" name="vp_students_name" id="f_vps" value="{{ item.vp_students_name if item and item.vp_students_name else '' }}" placeholder="Ù…Ø«Ø§Ù„: Ø£.Ø¯. ÙØ§Ø·Ù…Ø© Ù…Ø­Ù…ÙˆØ¯">
      </label>
      <div class="hint">Ø³ÙŠØ¸Ù‡Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø´Ù‡Ø§Ø¯Ø§Øª ÙƒÙ…ÙˆÙ‚Ø¹ ÙˆÙƒÙŠÙ„ Ø´Ø¤ÙˆÙ† Ø§Ù„Ù…ØªØ¯Ø±Ø¨ÙŠÙ†.</div>
    </div>

    <div class="row">
      <div class="field">
        <label class="actions" style="margin-top:28px;">
          <input type="checkbox" name="is_active" id="f_active" {% if item and item.is_active %}checked{% endif %}>
          <span>Ù†Ø´Ø·Ø©</span>
        </label>
      </div>
    </div>

    
    <div class="uploads-grid">
      <div class="box">
        <h4>ØªÙˆÙ‚ÙŠØ¹ Ø¹Ù…ÙŠØ¯ Ø§Ù„ÙƒÙ„ÙŠØ©</h4>
        {% if item and item.dean_sign_path %}
          <img class="thumb" src="{{ item.dean_sign_path }}" alt="Dean Signature">
        {% else %}
          <div class="upload-note">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ù„Ù Ù…Ø­ÙÙˆØ¸</div>
        {% endif %}
        <div class="field" style="margin-top:6px;">
          <input type="file" name="dean_sign" accept=".png,.jpg,.jpeg,.webp">
          <div class="upload-note">ÙŠÙØ¶Ù‘Ù„ PNG Ø¨Ø®Ù„ÙÙŠØ© Ø´ÙØ§ÙØ©.</div>
        </div>
      </div>

      <div class="box">
        <h4>ØªÙˆÙ‚ÙŠØ¹ ÙˆÙƒÙŠÙ„ Ø´Ø¤ÙˆÙ† Ø§Ù„Ù…ØªØ¯Ø±Ø¨ÙŠÙ†</h4>
        {% if item and item.vp_students_sign_path %}
          <img class="thumb" src="{{ item.vp_students_sign_path }}" alt="VP Students Signature">
        {% else %}
          <div class="upload-note">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ù„Ù Ù…Ø­ÙÙˆØ¸</div>
        {% endif %}
        <div class="field" style="margin-top:6px;">
          <input type="file" name="vp_students_sign" accept=".png,.jpg,.jpeg,.webp">
          <div class="upload-note">ÙŠÙØ¶Ù‘Ù„ PNG Ø¨Ø®Ù„ÙÙŠØ© Ø´ÙØ§ÙØ©.</div>
        </div>
      </div>

      <div class="box">
        <h4>Ø®ØªÙ… Ø´Ø¤ÙˆÙ† Ø§Ù„Ù…ØªØ¯Ø±Ø¨ÙŠÙ†</h4>
        {% if item and item.students_affairs_stamp_path %}
          <img class="thumb" src="{{ item.students_affairs_stamp_path }}" alt="Students Affairs Stamp">
        {% else %}
          <div class="upload-note">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ù„Ù Ù…Ø­ÙÙˆØ¸</div>
        {% endif %}
        <div class="field" style="margin-top:6px;">
          <input type="file" name="students_affairs_stamp" accept=".png,.jpg,.jpeg,.webp">
          <div class="upload-note">ÙŠÙØ¶Ù‘Ù„ PNG Ø¨Ø®Ù„ÙÙŠØ© Ø´ÙØ§ÙØ©.</div>
        </div>
      </div>
    </div>

    <div class="actions" style="margin-top:14px;">
      <button class="btn btn-primary" type="submit">Ø­ÙØ¸</button>
      <a class="btn btn-secondary" href="/admin/colleges">Ø±Ø¬ÙˆØ¹</a>
    </div>
  </form>
</div>

<script>
  const req = ['f_name','f_dean','f_vps'].map(id=>document.getElementById(id));
  const active = document.getElementById('f_active');
  function check() {
    const ok = req.every(x => x && x.value.trim().length > 0);
    active.disabled = !ok;
    if (!ok) active.checked = false;
  }
  req.forEach(i => i.addEventListener('input', check));
  window.addEventListener('DOMContentLoaded', check);
</script>
{% endblock %}
