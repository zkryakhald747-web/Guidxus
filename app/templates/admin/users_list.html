{% extends "base.html" %}

{% block breadcrumb %}
  <a href="/admin/">Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù†</a> â€¹ <span>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</span>
{% endblock %}

{% block content %}
<section class="card card-prestige">
  <div class="card-head"><div class="card-icon">ğŸ‘¥</div><h3>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</h3></div>

  <form method="get" action="/admin/users" class="form" style="margin-bottom:10px;">
    <div class="grid" style="grid-template-columns:1fr 160px;">
      <label>Ø¨Ø­Ø«
        <input type="text" name="q" value="{{ q }}">
      </label>
      <div class="actions" style="align-items:end;">
        <button class="btn btn-secondary">Ø¨Ø­Ø«</button>
        <a class="btn btn-primary" href="/admin/users/new">+ Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯</a>
      </div>
    </div>
  </form>

  <div class="table-wrap">
    <table class="tbl">
      <thead>
        <tr>
          <th>#</th>
          <th>Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</th>
          <th>Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</th>
          <th>Ø§Ù„Ø¯ÙˆØ±</th>
          <th>Ø§Ù„ÙƒÙ„ÙŠØ© (HOD)</th>
          <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
          <th>Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
        </tr>
      </thead>
      <tbody>
        {% for u in users %}
          <tr>
            <td>{{ loop.index }}</td>
            <td>{{ u.full_name }}</td>
            <td>{{ u.username }}</td>
            <td>
              {% if u.is_admin %}
                <span class="badge badge-live">Ø³ÙˆØ¨Ø± Ø£Ø¯Ù…Ù†</span>
              {% elif u.is_college_admin %}
                <span class="badge badge-info">Ø£Ø¯Ù…Ù† ÙƒÙ„ÙŠØ©</span>
              {% elif u.is_hod %}
                <span class="badge badge-draft">Ø±Ø¦ÙŠØ³ Ù‚Ø³Ù…</span>
              {% elif u.is_doc %}
                <span class="badge badge-success">Ø·Ø¨ÙŠØ¨</span>
              {% else %}
                <span class="muted">Ù…Ø³ØªØ®Ø¯Ù…</span>
              {% endif %}
            </td>
            <td>{{ u.hod_college or "-" }}</td>
            <td>
              {% if u.is_active %}<span class="status published">Ù†Ø´Ø·</span>
              {% else %}<span class="status closed">Ù…ÙˆÙ‚ÙˆÙ</span>{% endif %}
            </td>
            <td>
              <a class="btn btn-xs" href="/admin/users/{{ u.id }}/edit">ØªØ¹Ø¯ÙŠÙ„</a>
              <form method="post" action="/admin/users/{{ u.id }}/toggle" style="display:inline;">
                <button class="btn btn-xs" type="submit">
                  {% if u.is_active %}Ø¥ÙŠÙ‚Ø§Ù{% else %}ØªÙØ¹ÙŠÙ„{% endif %}
                </button>
              </form>
              <form method="post" action="/admin/users/{{ u.id }}/delete" style="display:inline;" onsubmit="return confirm('Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ØŸ');">
                <button class="btn btn-xs danger" type="submit">Ø­Ø°Ù</button>
              </form>
            </td>
          </tr>
        {% else %}
          <tr><td colspan="7" class="muted">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø³Ø¬Ù„Ø§Øª.</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</section>
{% endblock %}
