{% extends "base.html" %}

{% block breadcrumb %}
  <a href="/admin/">Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù†</a> â€º <span>Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span>
{% endblock %}

{% block content %}


{% if msg %}
<div style="background: #d4edda; border: 1px solid #c3e6cb; color: #155724; padding: 12px 16px; border-radius: 8px; margin-bottom: 16px; display: flex; align-items: center; gap: 8px;">
  <span>âœ…</span>
  <span>{{ msg|replace('+', ' ') }}</span>
</div>
{% endif %}


<style>
  .section { background:#f7fbfc; border-radius:14px; padding:18px; margin-top:14px; }
  .section-header { margin-bottom:10px; }
  .section-title { color:#0e6a74; margin:0; font-weight:800; }

  .kpi-grid {
    display:grid; gap:16px; 
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    margin-top: 12px;
  }
  .kpi-card {
    background: linear-gradient(180deg, #ffffff 0%, #f6fbfc 100%);
    border: 1px solid #e6f0f2;
    border-radius:12px; padding:14px 16px;
    display:flex; align-items:center; gap:12px;
    box-shadow: 0 6px 18px rgba(14,106,116,0.06);
  }
  .kpi-card .icon { font-size:1.9rem; }
  .kpi-meta { display:flex; flex-direction:column; gap:2px; }
  .kpi-label { font-size:.85rem; color:#5f7280; font-weight:600; }
  .kpi-value { font-size:1.6rem; font-weight:800; color:#0e6a74; }
  .kpi-sub { color:#4b6b73; font-size:0.78rem; }

  /* Cards grid */
  .cards-grid { display:grid; gap:12px; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); margin-top: 12px; }
  .card-tile { background:#fff; border-radius:12px; padding:12px; display:block; text-decoration:none; color:inherit; border:1px solid #eef2f4; box-shadow: 0 8px 22px rgba(14,106,116,0.03); transition: transform .12s ease, box-shadow .12s ease; }
  .card-tile:hover { transform: translateY(-6px); box-shadow: 0 12px 32px rgba(14,106,116,0.08); }
  .card-tile .card-icon { font-size:22px; width:44px; height:44px; display:flex; align-items:center; justify-content:center; border-radius:10px; background:#f5fbfc; margin-bottom:6px; }
  .card-tile .card-title { font-weight:700; margin:0 0 6px 0; color:#1b5360 }
  .card-tile .card-desc { color:#657b82; font-size:0.9rem }
</style>


<section class="card card-prestige">
  <div class="card-head">
    <div class="card-icon">ğŸ› ï¸</div>
    <h3>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… â€“ Ø§Ù„Ø£Ø¯Ù…Ù†</h3>
  </div>

  <div class="kpi-grid">
    <div class="kpi-card">
      <div class="icon">ğŸ‘¥</div>
      <div class="kpi-meta">
        <div class="kpi-label">Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ†</div>
        <div class="kpi-value">{{ counts.users }}</div>
        <div class="kpi-sub">Ø§Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…</div>
      </div>
    </div>
    <div class="kpi-card">
      <div class="icon">ğŸ›¡ï¸</div>
      <div class="kpi-meta">
        <div class="kpi-label">Ø§Ù„Ø£Ø¯Ù…Ù†</div>
        <div class="kpi-value">{{ counts.admins }}</div>
        <div class="kpi-sub">Ø£Ø°ÙˆÙ†Ø§Øª ÙƒØ§Ù…Ù„Ø© Ù„Ù„Ù†Ø¸Ø§Ù…</div>
      </div>
    </div>
    <div class="kpi-card">
      <div class="icon">ğŸ“</div>
      <div class="kpi-meta">
        <div class="kpi-label">Ø§Ù„ÙƒÙ„ÙŠØ§Øª</div>
        <div class="kpi-value">{{ counts.colleges }}</div>
        <div class="kpi-sub">Ø§Ù„ÙƒÙ„ÙŠØ§Øª Ø§Ù„Ù…Ø³Ø¬Ù‘Ù„Ø© ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…</div>
      </div>
    </div>
    <div class="kpi-card">
      <div class="icon">ğŸ«</div>
      <div class="kpi-meta">
        <div class="kpi-label">Ø§Ù„Ø£Ù‚Ø³Ø§Ù…</div>
        <div class="kpi-value">{{ counts.departments }}</div>
        <div class="kpi-sub">Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ø§Ù„Ù…Ø³Ø¬Ù„Ø©</div>
      </div>
    </div>
    <div class="kpi-card">
      <div class="icon">ğŸ“‹</div>
      <div class="kpi-meta">
        <div class="kpi-label">Ø§Ù„Ø¯ÙˆØ±Ø§Øª</div>
        <div class="kpi-value">{{ counts.courses }}</div>
        <div class="kpi-sub">Ø§Ù„Ø¯ÙˆØ±Ø§Øª Ø§Ù„Ù…Ø¶Ø§ÙØ©</div>
      </div>
    </div>
    <div class="kpi-card" style="flex-direction:column; align-items:flex-start; gap:8px;">
      <div style="display:flex; align-items:center; gap:10px;">
        <div class="icon">âœ…</div>
        <div class="kpi-meta">
          <div class="kpi-label">Ø¯ÙˆØ±Ø§Øª Ù…Ù†Ø´ÙˆØ±Ø©</div>
          <div class="kpi-value">{{ counts.courses_published }}</div>
        </div>
      </div>
      <div style="width:100%; background:#e9f4f6; height:8px; border-radius:6px; overflow:hidden;">
        <div style="background:linear-gradient(90deg,#0e6a74,#2fb6bf); height:8px; width: {{ counts.courses_published_pct }}%; transition: width .4s ease;"></div>
      </div>
      <div class="kpi-sub">{{ counts.courses_published_pct }}% Ù…Ù† Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¯ÙˆØ±Ø§Øª Ù…Ù†Ø´ÙˆØ±Ø©</div>
    </div>
    <div class="kpi-card">
      <div class="icon">ğŸ“Š</div>
      <div class="kpi-meta">
        <div class="kpi-label">Ø§Ù„Ù…Ø³Ø¬Ù„ÙˆÙ† ÙÙŠ Ø§Ù„Ø¯ÙˆØ±Ø§Øª Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø©</div>
        <div class="kpi-value">{{ counts.enrollments_published }}</div>
        <div class="kpi-sub">Ø¹Ø¯Ø¯ Ø§Ù„Ù…ØªØ¯Ø±Ø¨ÙŠÙ† Ø§Ù„Ù…Ø³Ø¬Ù„ÙŠÙ†</div>
      </div>
    </div>
  </div>
</section>


<section class="card card-prestige" style="margin-top: 20px;">
  <div class="card-head">
    <div class="card-icon">ğŸ¥</div>
    <h3>Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø¹ÙŠØ§Ø¯Ø©</h3>
  </div>

  <div class="kpi-grid">
    <div class="kpi-card">
      <div class="kpi-label">Ø§Ù„Ø£Ø·Ø¨Ø§Ø¡</div>
      <div class="kpi-value">{{ counts.get('doctors', 0) }}</div>
    </div>
    <div class="kpi-card">
      <div class="kpi-label">Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹ÙŠÙ†</div>
      <div class="kpi-value">{{ counts.get('visits', 0) }}</div>
    </div>
    <div class="kpi-card">
      <div class="kpi-label">Ø§Ù„Ø¥Ø­Ø§Ù„Ø§Øª</div>
      <div class="kpi-value">{{ counts.get('referrals', 0) }}</div>
    </div>
    <div class="kpi-card">
      <div class="kpi-label">Ø§Ù„Ø¥Ø¬Ø§Ø²Ø§Øª</div>
      <div class="kpi-value">{{ counts.get('leaves', 0) }}</div>
    </div>
  </div>
</section>


<section class="card card-prestige" style="margin-top: 20px;">
  <div class="card-head">
    <div class="card-icon">ğŸ’Š</div>
    <h3>Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„ØµÙŠØ¯Ù„ÙŠØ©</h3>
  </div>

  <div class="kpi-grid">
    <div class="kpi-card">
      <div class="icon">ğŸ’‰</div>
      <div class="kpi-meta">
        <div class="kpi-label">Ø§Ù„Ø£Ø¯ÙˆÙŠØ© Ø§Ù„Ù†Ø´Ø·Ø©</div>
        <div class="kpi-value">{{ counts.get('pharmacy_drugs', 0) }}</div>
        <div class="kpi-sub">Ø¹Ø¯Ø¯ Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø£Ø¯ÙˆÙŠØ©</div>
      </div>
    </div>
    <div class="kpi-card">
      <div class="icon">ğŸ“¦</div>
      <div class="kpi-meta">
        <div class="kpi-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</div>
        <div class="kpi-value">{{ counts.get('pharmacy_stock', 0) }}</div>
        <div class="kpi-sub">Ø¹Ø¯Ø¯ Ø§Ù„ÙˆØ­Ø¯Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©</div>
      </div>
    </div>
    <div class="kpi-card">
      <div class="icon">ğŸ“Š</div>
      <div class="kpi-meta">
        <div class="kpi-label">Ø§Ù„Ø­Ø±ÙƒØ§Øª</div>
        <div class="kpi-value">{{ counts.get('pharmacy_movements', 0) }}</div>
        <div class="kpi-sub">Ø¹Ù…Ù„ÙŠØ§Øª ØµØ±Ù/ØªÙˆØ±ÙŠØ¯</div>
      </div>
    </div>
  </div>
</section>


<section class="section">
  <div class="section-header">
    <h2 class="section-title">Ø§Ù„ÙˆØ­Ø¯Ø§Øª ğŸ‘¥</h2>
  </div>

  <div class="cards-grid">
    
    <a class="card-tile" href="/admin/users">
      <div class="card-icon">ğŸ‘¤</div>
      <div class="card-title">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</div>
      <div class="card-desc">Ø¥Ù†Ø´Ø§Ø¡/ØªØ¹Ø¯ÙŠÙ„/Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ÙˆØ§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª</div>
    </a>

    
    <a class="card-tile" href="/admin/departments">
      <div class="card-icon">ğŸ«</div>
      <div class="card-title">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ù‚Ø³Ø§Ù…</div>
      <div class="card-desc">Ø¥Ø¶Ø§ÙØ©/ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø£Ù‚Ø³Ø§Ù… ÙˆØ±Ø¨Ø·Ù‡Ø§ Ø¨Ø§Ù„ÙƒÙ„ÙŠØ§Øª</div>
    </a>

    
    <a class="card-tile" href="/admin/colleges">
      <div class="card-icon">ğŸ“</div>
      <div class="card-title">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙƒÙ„ÙŠØ§Øª</div>
      <div class="card-desc">Ø¥Ø¶Ø§ÙØ©/ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ÙƒÙ„ÙŠØ§Øª ÙˆÙ…Ø¹Ù„ÙˆÙ…Ø§ØªÙ‡Ø§</div>
    </a>

    
    <a class="card-tile" href="/admin/settings">
      <div class="card-icon">âš™ï¸</div>
      <div class="card-title">Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…</div>
      <div class="card-desc">Ø¶Ø¨Ø· Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø©</div>
    </a>

    
    <a class="card-tile" href="/admin/audit">
      <div class="card-icon">ğŸ“œ</div>
      <div class="card-title">Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙˆØ§Ù„Ù†Ø´Ø§Ø·</div>
      <div class="card-desc">Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª ÙˆÙ…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„</div>
    </a>

    
    <a class="card-tile" href="/admin/backup">
      <div class="card-icon">ğŸ’¾</div>
      <div class="card-title">Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ</div>
      <div class="card-desc">ØªØµØ¯ÙŠØ±/Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø£Ø³Ø§Ø³ÙŠØ©</div>
    </a>
  </div>
</section>

{% endblock %}
