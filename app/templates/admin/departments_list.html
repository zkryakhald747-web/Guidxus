{% extends "base.html" %}

{% block breadcrumb %}
  <a href="/admin/">Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù†</a> â€º <span>Ø§Ù„Ø£Ù‚Ø³Ø§Ù…</span>
{% endblock %}

{% block content %}
<style>
  .toolbar { display:flex; gap:10px; align-items:center; justify-content:flex-end; margin-bottom:12px; }
  .toolbar .grow { margin-inline-start:auto; }
  table.tbl { width:100%; border-collapse:separate; border-spacing:0; }
  table.tbl th, table.tbl td { padding:12px 14px; border-bottom:1px solid #eee; background:#fff; }
  table.tbl th { background:#f8fafb; text-align:right; font-weight:700; color:#374151; }
  .badge { display:inline-block; padding:4px 10px; border-radius:999px; font-size:.85rem; }
  .badge-on { background:#ecfdf5; color:#065f46; border:1px solid #a7f3d0; }
  .badge-off { background:#fff1f2; color:#b91c1c; border:1px solid #fecdd3; }
</style>

<div class="card">
  <div class="card-head">
    <div class="card-icon">ğŸ«</div>
    <h3>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ù‚Ø³Ø§Ù…</h3>
  </div>

  <div class="toolbar">
    <form class="grow" method="get" action="/admin/departments">
      <select name="college" onchange="this.form.submit()">
        <option value="">ÙƒÙ„ Ø§Ù„ÙƒÙ„ÙŠØ§Øª</option>
        {% for c in colleges %}
          <option value="{{ c }}" {% if selected_college==c %}selected{% endif %}>{{ c }}</option>
        {% endfor %}
      </select>
      <input type="search" name="q" value="{{ q }}" placeholder="Ø¨Ø­Ø« Ø¨Ø§Ø³Ù… Ø§Ù„Ù‚Ø³Ù…â€¦">
      <button class="btn btn-secondary" type="submit">Ø¨Ø­Ø«</button>
    </form>
    <a class="btn btn-primary" href="/admin/departments/new?college={{ selected_college }}">â• Ø¥Ø¶Ø§ÙØ© Ù‚Ø³Ù…</a>
  </div>

  <div class="table-wrap">
    <table class="tbl">
      <thead>
        <tr>
          <th style="width:36%">Ø§Ø³Ù… Ø§Ù„Ù‚Ø³Ù…</th>
          
          <th style="width:16%">Ø§Ù„Ø­Ø§Ù„Ø©</th>
          <th style="width:20%">Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
        </tr>
      </thead>
      <tbody>
        {% for d in departments %}
        <tr>
          <td>{{ d.name }}</td>
          <td>
            {# âœ… Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ© Ù„Ø§Ø³Ù… Ø±Ø¦ÙŠØ³ Ø§Ù„Ù‚Ø³Ù… Ø§Ù„ÙŠØ¯ÙˆÙŠ Ø«Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ø±ØªØ¨Ø· Ø«Ù… "ØºÙŠØ± Ù…Ø­Ø¯Ø¯" #}
            
          </td>
          <td>
            {% if d.is_active %}
              <span class="badge badge-on">Ù†Ø´Ø·</span>
            {% else %}
              <span class="badge badge-off">Ù…Ø¤Ø±Ø´Ù</span>
            {% endif %}
          </td>
          <td class="actions">
            <a class="btn btn-secondary" href="/admin/departments/{{ d.id }}/edit">ØªØ¹Ø¯ÙŠÙ„</a>
            <form method="post" action="/admin/departments/{{ d.id }}/toggle" style="display:inline">
              <button class="btn btn-secondary" type="submit">{{ 'Ø£Ø±Ø´ÙØ©' if d.is_active else 'Ø§Ø³ØªØ¹Ø§Ø¯Ø©' }}</button>
            </form>
            <form method="post" action="/admin/departments/{{ d.id }}/delete" style="display:inline" onsubmit="return confirm('Ø³ÙŠØªÙ… Ø­Ø°Ù Ø§Ù„Ù‚Ø³Ù… Ù†Ù‡Ø§Ø¦ÙŠÙ‹Ø§. Ù…ØªØ§Ø¨Ø¹Ø©ØŸ')">
              <button class="btn btn-secondary" type="submit">Ø­Ø°Ù</button>
            </form>
          </td>
        </tr>
        {% else %}
        <tr>
          <td colspan="4" class="muted">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ù‚Ø³Ø§Ù… Ù…Ø·Ø§Ø¨Ù‚Ø©.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
