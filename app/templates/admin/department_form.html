{% extends "base.html" %}

{% block breadcrumb %}
  <a href="/admin/">Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù†</a> â€º <a href="/admin/departments">Ø§Ù„Ø£Ù‚Ø³Ø§Ù…</a> â€º
  <span>{{ 'Ù‚Ø³Ù… Ø¬Ø¯ÙŠØ¯' if mode=='create' else 'ØªØ¹Ø¯ÙŠÙ„ Ù‚Ø³Ù…' }}</span>
{% endblock %}

{% block content %}
<style>
  .form-card { max-width: 720px; margin: 0 auto; }
  .field { display:flex; flex-direction:column; gap:6px; margin-bottom:12px; }
  .field input, .field select { padding:8px 10px; border:1px solid #e6e6e6; border-radius:10px; }
  .row { display:grid; grid-template-columns: 1fr 1fr; gap:12px; }
  @media (max-width: 640px){ .row { grid-template-columns: 1fr; } }
  .error { background:#fef2f2; color:#991b1b; border:1px solid #fecaca; padding:10px; border-radius:10px; margin-bottom:12px; }
</style>

<div class="card form-card">
  <div class="card-head">
    <div class="card-icon">ğŸ«</div>
    <h3>{{ 'Ø¥Ù†Ø´Ø§Ø¡ Ù‚Ø³Ù…' if mode=='create' else 'ØªØ¹Ø¯ÙŠÙ„ Ù‚Ø³Ù…' }}</h3>
  </div>

  {% if error %}
    <div class="error">{{ error }}</div>
  {% endif %}

  <form method="post">
    <div class="row">
      <div class="field">
        <label>Ø§Ø³Ù… Ø§Ù„Ù‚Ø³Ù…
          <input name="name" required value="{{ dept.name if dept else '' }}">
        </label>
      </div>
      <div class="field">
        <label>Ø§Ù„ÙƒÙ„ÙŠØ©
          <select name="college" required id="collegeSelect">
            <option value="">â€” Ø§Ø®ØªØ± Ø§Ù„ÙƒÙ„ÙŠØ© â€”</option>
            {% for c in colleges %}
              <option value="{{ c }}" {% if (dept and dept.college==c) or (selected_college and selected_college==c) %}selected{% endif %}>{{ c }}</option>
            {% endfor %}
          </select>
        </label>
      </div>
    </div>

    <div class="row">
      <div class="field">
        
        <small class="muted">ÙŠÙ…ÙƒÙ† ØªØ±ÙƒÙ‡ ÙØ§Ø±ØºÙ‹Ø§ ÙˆØ³ÙŠØ¸Ù‡Ø± ÙƒÙ€ Â«ØºÙŠØ± Ù…Ø­Ø¯Ø¯Â».</small>
      </div>
      <div class="field">
        <label class="actions" style="margin-top:28px;">
          <input type="checkbox" name="is_active" {% if not dept or dept.is_active %}checked{% endif %}>
          <span>Ù†Ø´Ø·</span>
        </label>
      </div>
    </div>

    <div class="actions" style="margin-top:10px;">
      <button class="btn btn-primary" type="submit">Ø­ÙØ¸</button>
      <a class="btn btn-secondary" href="/admin/departments?college={{ dept.college if dept else selected_college }}">Ø±Ø¬ÙˆØ¹</a>
    </div>
  </form>
</div>
{% endblock %}
