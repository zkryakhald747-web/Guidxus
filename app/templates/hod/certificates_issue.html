{% extends "base.html" %}

{% block breadcrumb %}
  <a href="/hod/">ุงูุฑุฆูุณูุฉ</a> โบ
  <a href="/hod/courses">ุงูุฏูุฑุงุช</a> โบ
  <span>ุงูุดูุงุฏุงุช</span>
{% endblock %}

{% block content %}

<section class="card card-prestige">
  <div class="card-head">
    <div class="card-icon">๐๏ธ</div>
    <h3>ุฅุตุฏุงุฑ ุงูุดูุงุฏุงุช โ {{ course.title }}</h3>
  </div>
  <p class="muted">ุชุธูุฑ ููุง ูุงุฆูุฉ ุงููุชุฏุฑุจูู ุงูุฐูู ุชู ูุถุนูู ูู <b>ุญุงุถุฑูู</b> ูู ูุฐู ุงูุฏูุฑุฉ.</p>
</section>

{% if request.query_params.get('issued') %}
  <div class="alert alert-success" role="alert">
    <h4 class="alert-heading">โ ุชู ุจูุฌุงุญ!</h4>
    <p>
      ุชู ุฅุตุฏุงุฑ <strong>{{ request.query_params.get('issued') }}</strong> ุดูุงุฏุฉ ุจูุฌุงุญ.
      {% if request.query_params.get('skipped') and request.query_params.get('skipped')|int > 0 %}
        <br><small>(ุชู ุชุฎุทู {{ request.query_params.get('skipped') }} ุดูุงุฏุงุช ููุตุฏุฑุฉ ุจุงููุนู)</small>
      {% endif %}
    </p>
  </div>
{% endif %}

{% if not attendees %}
  <div class="alert alert-info">ูุง ููุฌุฏ ูุชุฏุฑุจูู ุญุงุถุฑูู ูุฅุตุฏุงุฑ ุงูุดูุงุฏุงุช ููู.</div>
{% else %}
  <div class="actions" style="margin-bottom:10px">
    <a class="btn btn-primary" href="/hod/certificates/issue-all?course_id={{ course.id }}" onclick="return confirm('ูู ุชุฑูุฏ ุฅุตุฏุงุฑ ุดูุงุฏุงุช ูุฌููุน ุงูุญุงุถุฑููุ');">
      ๐ ุฅุตุฏุงุฑ ุฌููุน ุงูุดูุงุฏุงุช
    </a>
  </div>

  <div class="table-wrap">
    <table class="tbl">
      <thead>
        <tr>
          <th>ู</th>
          <th>ุงุณู ุงููุชุฏุฑุจ</th>
          <th>ุงูุฑูู ุงูุชุฏุฑูุจู</th>
          <th>ุงูุชุฎุตุต</th>
          <th>ุงูุญุงูุฉ</th>
          <th>ุฅุฌุฑุงุก</th>
        </tr>
      </thead>
      <tbody>
        {% for t in attendees %}
        <tr>
          <td>{{ loop.index }}</td>
          <td>{{ t.trainee_name }}</td>
          <td>{{ t.trainee_no }}</td>
          <td>{{ t.trainee_major or 'โ' }}</td>
          <td>
            {% if t.certificate_code %}
              <span class="badge bg-success">โ ููุตุฏุฑุฉ</span>
            {% else %}
              <span class="badge bg-warning">โณ ููุฏ ุงูุงูุชุธุงุฑ</span>
            {% endif %}
          </td>
          <td>
            <a class="btn btn-xs" href="/hod/certificates/print/{{ course.id }}/{{ t.trainee_no }}">
              ุฅุตุฏุงุฑ ุดูุงุฏุฉ ๐
            </a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
{% endif %}

{% endblock %}

